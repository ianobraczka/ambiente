<div class="history-container">
  ←
  <%= link_to @enterprise.program.name, @enterprise.program %>
</div>

<div id="edit-and-delete-section-buttons-container">

  <div class="edit-section-button"><%= button_to 'Editar', edit_enterprise_path(@enterprise), :class => "btn" %></div>
  <div class="edit-section-button"><%= button_to "Deletar empreendimento", @enterprise, method: :delete, data: { confirm: 'Tem certeza que quer deletar esse empreendimento?' }, :class => "btn btn-danger" %></div>

</div>

<div class="area-title"><%= @enterprise.name %></div>


<div class="list-item section-details">

  <br>

  <div class="content"><strong><span class="percentage-number"><%= @enterprise.completed %>%</span> completo</strong></div>
  <div class="content"><b>Investimento:</b> <%= number_to_currency(@enterprise.price, :unit => "R$") %></div>

  <hr>

  <div class="content"><b>HH:</b> <%= @enterprise.hh %></div>
  <div class="content"><b>Valor:</b> <%= number_to_currency(@enterprise.value, :unit => "R$") %></div>
  <div class="content"><b>Porcentagem:</b> <%= @enterprise.percentage %>%</div>

  <hr>

  <%= form_for(@enterprise) do |f| %>
    <% if @enterprise.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@enterprise.errors.count, "error") %> prohibited this product from being saved:</h2>

        <ul>
        <% @enterprise.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="content"><%= f.label "Escolha o ponderador" %></div>
    <div class="content"><%= f.select :weight, options_for_select([["Valor", 1], ["HH", 2], ["Porcentagem", 3]], @enterprise.weight) %></div>
    <center><div class="content"><%= f.submit "Ponderar", :class => "btn btn-success" %></div></center>

    <br>
<% end %>

</div>

<%= button_to "Gerar relatório", enterprise_report_path(@enterprise), :class => "btn", :method => "get" %>

<hr>


<div class="right-aligned-create-button-container">
  <%= button_to "Criar área", new_enterprise_area_path(@enterprise), :method => "get", :class => "btn btn-success" %>
</div>

<h2 class="area-subtitle">ÁREAS</h2>

<% if @enterprise.areas.empty? then %>
  <br>
  <div class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <center><strong>Este empreendimento ainda não possui nenhuma área cadastrada!</strong></center>
  </div>
<%end%>

<% if !(@enterprise.areas.empty?) then %>
  
  <div class="row">
  <% @enterprise.areas.each do |area| %>
    <div class="span3 list-item">
      <div class="name"><%= link_to area.name, area %></div>
      <div class="content"><span class="percentage-number"><b><%= area.completed%>%</b> </span>completo</div>
      <div class="content"><b>Investimento: </b><%= number_to_currency(area.price, :unit => "R$") %></div>

      <hr>

      <div class="content"><b>HH:</b> <%= area.hh %></div>
      <div class="content"><b>Valor: </b><%= number_to_currency(area.value, :unit => "R$") %></div>
      <div class="content"><b>Porcentagem:</b> <%= area.percentage %>%</div>
      <br>
    </div>

  <% end %>
  </div>
<%end%>
<br>
<br>